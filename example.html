<!DOCTYPE html>
<html>
  <head>
    <script src="./pdftex.js"></script>
    <style>
      textarea {
        width: 100%;
        height: 500px;
      }
    </style>
  </head>
  <body>
    <textarea>
\documentclass[12pt]{article}
\usepackage{amsmath}
\title{pdftex.js}
\author{Compile \TeX{} directly in your browser!}
\date{\today}
\begin{document}
  \maketitle
  \TeX{}live.js is a compiler for the \TeX{}
  typesetting program created using Mozilla's Emscripten
  Compiler. It offers programmable desktop
  publishing features and extensive facilities for
  automating most aspects of typesetting and desktop
  publishing, including numbering and cross-referencing,
  tables and figures, page layout, bibliographies, and
  much more. It supports \LaTeX{} which was originally written
  in 1984 by Leslie Lamport and has become the dominant method for
  using \TeX;

  % This is a comment, not shown in final output.
  % The following shows typesetting power of LaTeX
  \begin{align}
    E_0 &= mc^2    \\
    E &= \frac{mc^2}{\sqrt{1-\frac{v^2}{c^2}}}
  \end{align}
\end{document}
    </textarea>
    <button onclick="compile()">Compile!</button>
    <a></a>
    <script>
      function compile () {
        var source = document.querySelector('textarea').value
        var compile = pdftex(source, { debug: true })
        compile.on('finish', function (event) {
          if (event.success) {
            var a = document.querySelector('a')
            a.textContent = event.url
            a.setAttribute('href', event.url)
          }
        })
      }
    </script>
  </body>
</html>

